{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mouni/Desktop/marrakech/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\r\n\r\nconst prismaClientSingleton = () => {\r\n    return new PrismaClient()\r\n}\r\n\r\ndeclare global {\r\n    var prisma: undefined | ReturnType<typeof prismaClientSingleton>\r\n}\r\n\r\nconst prisma = globalThis.prisma ?? prismaClientSingleton()\r\n\r\nexport default prisma\r\n\r\nif (process.env.NODE_ENV !== 'production') globalThis.prisma = prisma\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,wBAAwB;IAC1B,OAAO,IAAI,6IAAY;AAC3B;AAMA,MAAM,SAAS,WAAW,MAAM,IAAI;uCAErB;AAEf,wCAA2C,WAAW,MAAM,GAAG"}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mouni/Desktop/marrakech/src/app/api/newsletter/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport prisma from \"@/lib/prisma\";\r\n\r\nexport async function POST(request: Request) {\r\n    try {\r\n        const body = await request.json();\r\n        const { email } = body;\r\n\r\n        if (!email || !email.includes(\"@\")) {\r\n            return NextResponse.json(\r\n                { error: \"Invalid email address\" },\r\n                { status: 400 }\r\n            );\r\n        }\r\n\r\n        // Upsert to handle duplicates gracefully\r\n        const subscriber = await prisma.newsletterSubscriber.upsert({\r\n            where: { email },\r\n            update: { active: true },\r\n            create: { email },\r\n        });\r\n\r\n        return NextResponse.json({ success: true, subscriber }, { status: 201 });\r\n    } catch (error) {\r\n        console.error(\"Newsletter error:\", error);\r\n        return NextResponse.json(\r\n            { error: \"Failed to subscribe\" },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,OAAgB;IACvC,IAAI;QACA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,KAAK,EAAE,GAAG;QAElB,IAAI,CAAC,SAAS,CAAC,MAAM,QAAQ,CAAC,MAAM;YAChC,OAAO,gJAAY,CAAC,IAAI,CACpB;gBAAE,OAAO;YAAwB,GACjC;gBAAE,QAAQ;YAAI;QAEtB;QAEA,yCAAyC;QACzC,MAAM,aAAa,MAAM,iIAAM,CAAC,oBAAoB,CAAC,MAAM,CAAC;YACxD,OAAO;gBAAE;YAAM;YACf,QAAQ;gBAAE,QAAQ;YAAK;YACvB,QAAQ;gBAAE;YAAM;QACpB;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM;QAAW,GAAG;YAAE,QAAQ;QAAI;IAC1E,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,qBAAqB;QACnC,OAAO,gJAAY,CAAC,IAAI,CACpB;YAAE,OAAO;QAAsB,GAC/B;YAAE,QAAQ;QAAI;IAEtB;AACJ"}}]
}