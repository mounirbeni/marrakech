module.exports=[70298,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(56711),f=a.i(23292),g=a.i(99570),h=a.i(91119),i=a.i(66718),j=a.i(86304),k=a.i(70430),l=a.i(51523),m=a.i(6015),n=a.i(14574),o=a.i(96221),p=a.i(21601),q=a.i(21374),r=a.i(20005),s=a.i(92759),t=a.i(30617),u=a.i(41675),v=a.i(21161),w=a.i(62722),x=a.i(70106);let y=(0,x.default)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var z=a.i(46842),A=a.i(16201),B=a.i(92e3),C=a.i(15618),D=a.i(41710);let E=(0,x.default)("check-check",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);var F=a.i(68114);function G(){let a=(0,d.useRouter)(),[x,G]=(0,c.useState)(null),[H,I]=(0,c.useState)([]),[J,K]=(0,c.useState)([]),[L,M]=(0,c.useState)(null),[N,O]=(0,c.useState)([]),[P,Q]=(0,c.useState)("overview"),[R,S]=(0,c.useState)(!0),[T,U]=(0,c.useState)(""),[V,W]=(0,c.useState)(!1),[X,Y]=(0,c.useState)(!1),[Z,$]=(0,c.useState)(null),[_,aa]=(0,c.useState)(5),[ab,ac]=(0,c.useState)(""),[ad,ae]=(0,c.useState)(!1),[af,ag]=(0,c.useState)(null),[ah,ai]=(0,c.useState)(""),[aj,ak]=(0,c.useState)(!1);(0,c.useEffect)(()=>{fetch("/api/auth/me").then(a=>a.json()).then(b=>{b.user?(G(b.user),al()):a.push("/login")}).catch(()=>a.push("/login"))},[a]),(0,c.useEffect)(()=>{if("messages"===P&&x&&(am(),L)){an(L);let a=setInterval(()=>an(L),3e3);return()=>clearInterval(a)}},[P,x,L]);let al=async()=>{try{let a=await fetch("/api/my-bookings");a.ok&&I(await a.json())}catch(a){console.error(a)}finally{S(!1)}},am=async()=>{try{let a=await fetch("/api/conversations");if(a.ok){let b=await a.json();K(b),L||!(b.length>0)||X||M(b[0].id)}}catch(a){console.error(a)}},an=async a=>{try{let b=await fetch(`/api/conversations/${a}`);if(b.ok){let a=await b.json();O(a);let c=await fetch("/api/conversations");if(c.ok){let a=await c.json();K(a)}}}catch(a){console.error(a)}},ao=async()=>{await fetch("/api/auth/logout",{method:"POST"}),a.push("/login")},ap=async a=>{if(confirm("Are you sure you want to cancel this booking?"))try{let b=await fetch(`/api/bookings/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"CANCELLED"})});if(b.ok)f.toast.success("Booking cancelled successfully"),al();else{let a=await b.json();f.toast.error(a.error||"Failed to cancel booking")}}catch(a){f.toast.error("Failed to cancel booking")}},aq=async a=>{if(a.preventDefault(),T.trim()&&L){W(!0);try{let a=await fetch(`/api/conversations/${L}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:T})});if(a.ok){let b=await a.json();O([...N,b]),U("")}else{let b=await a.json();f.toast.error(b.error||"Failed to send message")}}finally{W(!1)}}},ar=async a=>{a.preventDefault();let b=new FormData(a.currentTarget),c=b.get("subject"),d=b.get("description");if(!c.trim()||!d.trim())return void f.toast.error("Please fill in all fields");W(!0);try{let b=await fetch("/api/conversations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subject:c,content:d})});if(b.ok){let c=await b.json();f.toast.success("Ticket submitted successfully!"),Y(!1),M(c.id),am(),a.target.reset()}else{let a=await b.json();f.toast.error(a.error||"Failed to create ticket")}}finally{W(!1)}},as=async()=>{if(af&&ah.trim()){ak(!0);try{let a=`Modification Request - ${af.activityTitle}`,b=`Booking ID: ${af.id}
Activity: ${af.activityTitle}
Date: ${(0,e.format)(new Date(af.date),"PPP")}

Requested Changes:
${ah}`;(await fetch("/api/conversations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subject:a,content:b})})).ok&&(f.toast.success("Modification request sent!"),ag(null),ai(""),Q("messages"),am())}finally{ak(!1)}}},at=async()=>{if(Z){ae(!0);try{(await fetch("/api/reviews",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookingId:Z.id,rating:_,comment:ab})})).ok?(f.toast.success("Review submitted! Thank you."),$(null),ac(""),aa(5),al()):f.toast.error("Failed to submit review")}finally{ae(!1)}}};if(R)return(0,b.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,b.jsx)(o.Loader2,{className:"animate-spin h-8 w-8"})});let au=[{id:"overview",label:"Overview",icon:t.LayoutDashboard},{id:"bookings",label:"My Bookings",icon:u.Calendar},{id:"messages",label:"Support",icon:p.MessageSquare},{id:"settings",label:"Settings",icon:v.Settings}],av={total:H.length,active:H.filter(a=>"PENDING"===a.status||"CONFIRMED"===a.status).length,completed:H.filter(a=>"COMPLETED"===a.status).length,cancelled:H.filter(a=>"CANCELLED"===a.status).length},aw=J.find(a=>a.id===L);return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-black/5",children:[(0,b.jsx)("div",{className:"border-b bg-white dark:bg-black/20",children:(0,b.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-4 max-w-7xl",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:"My Dashboard"}),(0,b.jsxs)("p",{className:"text-xs sm:text-sm text-muted-foreground",children:["Welcome back, ",x?.name]})]}),(0,b.jsx)(g.Button,{variant:"outline",size:"sm",onClick:ao,className:"md:hidden gap-1 text-red-600 hover:text-red-700 hover:bg-red-50",children:(0,b.jsx)(r.LogOut,{className:"w-4 h-4"})})]})})}),(0,b.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6 max-w-7xl flex flex-col md:flex-row gap-4 md:gap-6",children:[(0,b.jsx)("aside",{className:"w-64 space-y-2 hidden md:block",children:(0,b.jsxs)(h.Card,{className:"flex flex-col h-[calc(100vh-140px)]",children:[(0,b.jsx)(h.CardContent,{className:"p-3 flex-1",children:au.map(a=>(0,b.jsxs)("button",{onClick:()=>Q(a.id),className:(0,F.cn)("w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-sm font-medium",P===a.id?"bg-primary text-primary-foreground":"hover:bg-secondary text-muted-foreground hover:text-foreground"),children:[(0,b.jsx)(a.icon,{className:"w-5 h-5"}),a.label]},a.id))}),(0,b.jsx)("div",{className:"p-3 border-t",children:(0,b.jsxs)(g.Button,{variant:"outline",onClick:ao,className:"w-full gap-2 text-red-600 hover:text-red-700 hover:bg-red-50",children:[(0,b.jsx)(r.LogOut,{className:"w-4 h-4"}),"Logout"]})})]})}),(0,b.jsx)("div",{className:"md:hidden w-full mb-4",children:(0,b.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2",children:au.map(a=>(0,b.jsxs)(g.Button,{variant:P===a.id?"default":"outline",size:"sm",onClick:()=>Q(a.id),className:"gap-2 whitespace-nowrap",children:[(0,b.jsx)(a.icon,{className:"w-4 h-4"}),a.label]},a.id))})}),(0,b.jsxs)("main",{className:"flex-1 space-y-6",children:["overview"===P&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[(0,b.jsxs)(h.Card,{className:"hover:shadow-md transition-shadow",children:[(0,b.jsx)(h.CardHeader,{className:"pb-2 sm:pb-3",children:(0,b.jsx)(h.CardTitle,{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"Total Bookings"})}),(0,b.jsx)(h.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl sm:text-3xl font-bold",children:av.total})})]}),(0,b.jsxs)(h.Card,{className:"hover:shadow-md transition-shadow",children:[(0,b.jsx)(h.CardHeader,{className:"pb-2 sm:pb-3",children:(0,b.jsx)(h.CardTitle,{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"Active"})}),(0,b.jsx)(h.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl sm:text-3xl font-bold text-blue-600",children:av.active})})]}),(0,b.jsxs)(h.Card,{className:"hover:shadow-md transition-shadow",children:[(0,b.jsx)(h.CardHeader,{className:"pb-2 sm:pb-3",children:(0,b.jsx)(h.CardTitle,{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"Completed"})}),(0,b.jsx)(h.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl sm:text-3xl font-bold text-green-600",children:av.completed})})]}),(0,b.jsxs)(h.Card,{className:"hover:shadow-md transition-shadow",children:[(0,b.jsx)(h.CardHeader,{className:"pb-2 sm:pb-3",children:(0,b.jsx)(h.CardTitle,{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"Cancelled"})}),(0,b.jsx)(h.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl sm:text-3xl font-bold text-red-600",children:av.cancelled})})]})]}),(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)(h.CardTitle,{children:"Recent Bookings"})}),(0,b.jsx)(h.CardContent,{children:H.slice(0,5).map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between py-3 border-b last:border-0",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.activityTitle}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,e.format)(new Date(a.date),"PPP")})]}),(0,b.jsx)(j.Badge,{className:"CONFIRMED"===a.status?"bg-green-500":"CANCELLED"===a.status?"bg-red-500":"COMPLETED"===a.status?"bg-orange-500":"bg-yellow-500",children:a.status})]},a.id))})]})]}),"bookings"===P&&(0,b.jsxs)(h.Card,{children:[(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardTitle,{children:"Your Bookings"}),(0,b.jsx)(h.CardDescription,{children:"Manage and track your reservations"})]}),(0,b.jsx)(h.CardContent,{children:0===H.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(u.Calendar,{className:"w-12 h-12 mx-auto text-muted-foreground/50 mb-3"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"No bookings found."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"md:hidden space-y-4",children:H.map(a=>(0,b.jsx)(h.Card,{className:"overflow-hidden",children:(0,b.jsxs)(h.CardContent,{className:"p-4 space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h3",{className:"font-semibold text-sm sm:text-base truncate",children:a.activityTitle}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["ID: ",a.id.slice(0,8)]})]}),(0,b.jsx)(j.Badge,{className:"CONFIRMED"===a.status?"bg-green-500":"CANCELLED"===a.status?"bg-red-500":"COMPLETED"===a.status?"bg-orange-500":"bg-yellow-500",children:a.status})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-muted-foreground",children:[(0,b.jsx)(u.Calendar,{className:"w-3.5 h-3.5"}),(0,b.jsx)("span",{className:"text-xs",children:(0,e.format)(new Date(a.date),"PP")})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-muted-foreground",children:[(0,b.jsx)(z.User,{className:"w-3.5 h-3.5"}),(0,b.jsxs)("span",{className:"text-xs",children:[a.guests," ",1===a.guests?"Guest":"Guests"]})]})]}),("PENDING"===a.status||"COMPLETED"===a.status&&!a.review)&&(0,b.jsx)(l.Separator,{}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:["PENDING"===a.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(g.Button,{size:"sm",variant:"outline",onClick:()=>ag(a),className:"gap-1.5 flex-1",children:[(0,b.jsx)(y,{className:"w-3.5 h-3.5"})," Modify"]}),(0,b.jsxs)(g.Button,{size:"sm",variant:"destructive",onClick:()=>ap(a.id),className:"gap-1.5 flex-1",children:[(0,b.jsx)(w.XCircle,{className:"w-3.5 h-3.5"})," Cancel"]})]}),"COMPLETED"===a.status&&!a.review&&(0,b.jsxs)(g.Button,{size:"sm",onClick:()=>$(a),className:"gap-1.5 w-full",children:[(0,b.jsx)(q.Star,{className:"w-3.5 h-3.5"})," Rate Experience"]}),a.review&&(0,b.jsxs)("span",{className:"text-xs text-muted-foreground flex items-center gap-1.5 w-full justify-center py-1",children:[(0,b.jsx)(A.CheckCircle,{className:"w-3.5 h-3.5 text-green-600"})," Reviewed"]})]})]})},a.id))}),(0,b.jsx)("div",{className:"hidden md:block rounded-md border overflow-x-auto",children:(0,b.jsxs)(m.Table,{children:[(0,b.jsx)(m.TableHeader,{children:(0,b.jsxs)(m.TableRow,{children:[(0,b.jsx)(m.TableHead,{children:"ID"}),(0,b.jsx)(m.TableHead,{children:"Activity"}),(0,b.jsx)(m.TableHead,{children:"Date"}),(0,b.jsx)(m.TableHead,{children:"Guests"}),(0,b.jsx)(m.TableHead,{children:"Status"}),(0,b.jsx)(m.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(m.TableBody,{children:H.map(a=>(0,b.jsxs)(m.TableRow,{children:[(0,b.jsx)(m.TableCell,{className:"font-mono text-xs",children:a.id.slice(0,8)}),(0,b.jsx)(m.TableCell,{className:"font-medium",children:a.activityTitle}),(0,b.jsx)(m.TableCell,{children:(0,e.format)(new Date(a.date),"PP")}),(0,b.jsx)(m.TableCell,{children:a.guests}),(0,b.jsx)(m.TableCell,{children:(0,b.jsx)(j.Badge,{className:"CONFIRMED"===a.status?"bg-green-500 hover:bg-green-600":"CANCELLED"===a.status?"bg-red-500 hover:bg-red-600":"COMPLETED"===a.status?"bg-orange-500 hover:bg-orange-600":"bg-yellow-500 hover:bg-yellow-600",children:a.status})}),(0,b.jsxs)(m.TableCell,{className:"text-right space-x-2",children:["PENDING"===a.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(g.Button,{size:"sm",variant:"outline",onClick:()=>ag(a),className:"gap-1",children:[(0,b.jsx)(y,{className:"w-3 h-3"})," Modify"]}),(0,b.jsxs)(g.Button,{size:"sm",variant:"destructive",onClick:()=>ap(a.id),className:"gap-1",children:[(0,b.jsx)(w.XCircle,{className:"w-3 h-3"})," Cancel"]})]}),"COMPLETED"===a.status&&!a.review&&(0,b.jsxs)(g.Button,{size:"sm",onClick:()=>$(a),className:"gap-1",children:[(0,b.jsx)(q.Star,{className:"w-3 h-3"})," Rate"]}),a.review&&(0,b.jsxs)("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(A.CheckCircle,{className:"w-3 h-3 text-green-600"})," Reviewed"]})]})]},a.id))})]})})]})})]}),"messages"===P&&(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 h-[calc(100vh-220px)]",children:[(0,b.jsxs)("div",{className:(0,F.cn)("w-full md:w-80 flex flex-col gap-4",L&&"hidden md:flex"),children:[(0,b.jsxs)(g.Button,{onClick:()=>{Y(!0),M(null)},className:"w-full gap-2",size:"lg",children:[(0,b.jsx)(C.Plus,{className:"w-5 h-5"}),"Create New Ticket"]}),(0,b.jsxs)(h.Card,{className:"flex-1 overflow-hidden flex flex-col",children:[(0,b.jsxs)(h.CardHeader,{className:"pb-3",children:[(0,b.jsx)(h.CardTitle,{className:"text-lg",children:"Your Tickets"}),(0,b.jsxs)(h.CardDescription,{children:[J.length," conversation",1!==J.length?"s":""]})]}),(0,b.jsx)(h.CardContent,{className:"p-0 flex-1 overflow-y-auto",children:0===J.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[(0,b.jsx)(p.MessageSquare,{className:"w-12 h-12 text-muted-foreground/50 mb-3"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No tickets yet"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Create your first support ticket"})]}):J.map(a=>(0,b.jsxs)("button",{onClick:()=>{M(a.id),Y(!1)},className:(0,F.cn)("w-full p-4 border-b text-left transition-colors hover:bg-secondary/50",L===a.id&&"bg-secondary"),children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,b.jsx)("p",{className:"font-medium text-sm truncate pr-2",children:a.subject}),(0,b.jsxs)(j.Badge,{variant:"OPEN"===a.status?"default":"secondary",className:"shrink-0",children:["OPEN"===a.status?(0,b.jsx)(D.Clock,{className:"w-3 h-3 mr-1"}):(0,b.jsx)(E,{className:"w-3 h-3 mr-1"}),a.status]})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,e.format)(new Date(a.updatedAt),"PPp")}),a.messages&&a.messages[0]&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground truncate mt-2",children:[a.messages[0].content.substring(0,60),"..."]})]},a.id))})]})]}),(0,b.jsx)("div",{className:(0,F.cn)("flex-1",!L&&!X&&"hidden md:block"),children:X?(0,b.jsxs)(h.Card,{className:"h-full",children:[(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)("div",{className:"md:hidden mb-2",children:(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",onClick:()=>Y(!1),className:"-ml-2 gap-1",children:"â† Back to tickets"})}),(0,b.jsx)(h.CardTitle,{children:"Create New Support Ticket"}),(0,b.jsx)(h.CardDescription,{children:"Describe your issue and we'll respond within 48 hours"})]}),(0,b.jsx)(h.CardContent,{children:(0,b.jsxs)("form",{onSubmit:ar,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{htmlFor:"subject",children:"Subject *"}),(0,b.jsx)(i.Input,{id:"subject",name:"subject",placeholder:"Brief summary of your issue",maxLength:100,required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{htmlFor:"description",children:"Description * (Max 500 characters)"}),(0,b.jsx)("textarea",{id:"description",name:"description",className:"w-full min-h-[200px] rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring resize-none",placeholder:"Describe your issue in detail...",maxLength:500,required:!0,onChange:a=>{let b=document.getElementById("char-counter");b&&(b.textContent=`${a.target.value.length}/500`)}}),(0,b.jsx)("p",{id:"char-counter",className:"text-xs text-muted-foreground text-right",children:"0/500"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(g.Button,{type:"button",variant:"outline",onClick:()=>Y(!1),children:"Cancel"}),(0,b.jsxs)(g.Button,{type:"submit",disabled:V,className:"gap-2",children:[V&&(0,b.jsx)(o.Loader2,{className:"w-4 h-4 animate-spin"}),"Submit Ticket"]})]})]})})]}):L?(0,b.jsxs)(h.Card,{className:"h-full flex flex-col",children:[(0,b.jsxs)(h.CardHeader,{className:"border-b",children:[(0,b.jsx)("div",{className:"md:hidden mb-2",children:(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",onClick:()=>M(null),className:"-ml-2 gap-1",children:"â† Back to tickets"})}),(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(h.CardTitle,{className:"text-lg",children:aw?.subject}),(0,b.jsx)(h.CardDescription,{className:"mt-1",children:aw?.status==="OPEN"?"ðŸ’¬ Active conversation":"âœ“ Closed"})]}),(0,b.jsx)(j.Badge,{variant:aw?.status==="OPEN"?"default":"secondary",children:aw?.status})]})]}),(0,b.jsx)(h.CardContent,{className:"flex-1 overflow-y-auto space-y-4 p-4",children:N.map(a=>(0,b.jsx)("div",{className:`flex ${"USER"===a.sender?"justify-end":"justify-start"}`,children:(0,b.jsxs)("div",{className:(0,F.cn)("max-w-[80%] rounded-lg p-3","USER"===a.sender?"bg-primary text-primary-foreground":"bg-muted"),children:[(0,b.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:a.content}),(0,b.jsx)("span",{className:"text-[10px] opacity-70 block mt-1",children:(0,e.format)(new Date(a.createdAt),"PPp")})]})},a.id))}),aw?.status==="OPEN"&&(0,b.jsx)("div",{className:"p-4 border-t",children:(0,b.jsxs)("form",{onSubmit:aq,className:"flex gap-2",children:[(0,b.jsx)(i.Input,{value:T,onChange:a=>U(a.target.value),placeholder:"Type your message...",disabled:V,className:"flex-1"}),(0,b.jsx)(g.Button,{type:"submit",disabled:V||!T.trim(),children:V?(0,b.jsx)(o.Loader2,{className:"w-4 h-4 animate-spin"}):(0,b.jsx)(s.Send,{className:"w-4 h-4"})})]})}),aw?.status==="CLOSED"&&(0,b.jsx)("div",{className:"p-4 border-t bg-muted/50",children:(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-center text-muted-foreground",children:[(0,b.jsx)(w.XCircle,{className:"w-4 h-4"}),(0,b.jsx)("p",{children:"This ticket has been closed by support. Please create a new ticket for additional assistance."})]})})]}):(0,b.jsx)(h.Card,{className:"h-full flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center p-6",children:[(0,b.jsx)(p.MessageSquare,{className:"w-16 h-16 text-muted-foreground/50 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Select a Conversation"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose a ticket from the list or create a new one"}),(0,b.jsxs)(g.Button,{onClick:()=>Y(!0),className:"gap-2",children:[(0,b.jsx)(C.Plus,{className:"w-4 h-4"}),"Create New Ticket"]})]})})})]}),"settings"===P&&(0,b.jsxs)(h.Card,{children:[(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardTitle,{children:"Account Settings"}),(0,b.jsx)(h.CardDescription,{children:"Manage your profile information"})]}),(0,b.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{children:"Account Email"}),(0,b.jsx)(i.Input,{value:x?.email,disabled:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{children:"Full Name"}),(0,b.jsx)(i.Input,{defaultValue:x?.name,placeholder:"Your name"})]}),(0,b.jsx)(l.Separator,{}),(0,b.jsxs)("div",{className:"flex items-center gap-2 p-4 bg-muted rounded-lg",children:[(0,b.jsx)(B.AlertCircle,{className:"w-5 h-5 text-muted-foreground"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Contact support to update your email or password."})]})]})]})]})]}),(0,b.jsx)(n.Dialog,{open:!!af,onOpenChange:a=>!a&&ag(null),children:(0,b.jsxs)(n.DialogContent,{className:"max-h-[90vh] overflow-y-auto sm:max-w-md",children:[(0,b.jsxs)(n.DialogHeader,{children:[(0,b.jsx)(n.DialogTitle,{children:"Request Modification"}),(0,b.jsxs)(n.DialogDescription,{className:"text-sm",children:["Tell us what you'd like to change about your booking for ",af?.activityTitle]})]}),(0,b.jsx)("div",{className:"space-y-4 py-2 sm:py-4",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{children:"What would you like to modify?"}),(0,b.jsx)("textarea",{className:"w-full min-h-[100px] sm:min-h-[120px] rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring resize-none",placeholder:"E.g., change date, number of guests, special requests...",value:ah,onChange:a=>ai(a.target.value)})]})}),(0,b.jsxs)(n.DialogFooter,{className:"flex-col sm:flex-row gap-2",children:[(0,b.jsx)(g.Button,{variant:"ghost",onClick:()=>ag(null),className:"w-full sm:w-auto",children:"Cancel"}),(0,b.jsx)(g.Button,{onClick:as,disabled:aj||!ah.trim(),className:"w-full sm:w-auto",children:aj?(0,b.jsx)(o.Loader2,{className:"w-4 h-4 animate-spin"}):"Send Request"})]})]})}),(0,b.jsx)(n.Dialog,{open:!!Z,onOpenChange:a=>!a&&$(null),children:(0,b.jsxs)(n.DialogContent,{className:"max-h-[90vh] overflow-y-auto sm:max-w-md",children:[(0,b.jsxs)(n.DialogHeader,{children:[(0,b.jsx)(n.DialogTitle,{children:"Rate Your Experience"}),(0,b.jsxs)(n.DialogDescription,{className:"text-sm",children:["How was your ",Z?.activityTitle,"?"]})]}),(0,b.jsxs)("div",{className:"space-y-4 py-2 sm:py-4",children:[(0,b.jsx)("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>aa(a),className:"focus:outline-none transition-transform hover:scale-110 active:scale-95","aria-label":`Rate ${a} star${a>1?"s":""}`,children:(0,b.jsx)(q.Star,{className:`w-8 h-8 sm:w-9 sm:h-9 ${a<=_?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},a))}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{children:"Comment"}),(0,b.jsx)("textarea",{className:"w-full min-h-[80px] sm:min-h-[100px] rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring resize-none",placeholder:"Share your experience...",value:ab,onChange:a=>ac(a.target.value)})]})]}),(0,b.jsxs)(n.DialogFooter,{className:"flex-col sm:flex-row gap-2",children:[(0,b.jsx)(g.Button,{variant:"ghost",onClick:()=>$(null),className:"w-full sm:w-auto",children:"Cancel"}),(0,b.jsx)(g.Button,{onClick:at,disabled:ad,className:"w-full sm:w-auto",children:ad?(0,b.jsx)(o.Loader2,{className:"w-4 h-4 animate-spin"}):"Submit Review"})]})]})})]})}a.s(["default",()=>G],70298)}];

//# sourceMappingURL=src_app_profile_page_tsx_c1d907c4._.js.map