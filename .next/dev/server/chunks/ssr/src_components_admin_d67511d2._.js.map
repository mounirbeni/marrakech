{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mouni/Desktop/marrakech/src/components/admin/AdminSidebar.tsx"],"sourcesContent":["'use client'\r\n\r\nimport Link from 'next/link'\r\nimport { usePathname } from 'next/navigation'\r\nimport { LayoutDashboard, Calendar, Settings, LogOut, Package, MessageSquare, Users } from 'lucide-react'\r\nimport { cn } from '@/lib/utils'\r\nimport { Button } from '@/components/ui/button'\r\n\r\nconst sidebarItems = [\r\n    {\r\n        title: 'Dashboard',\r\n        href: '/admin',\r\n        icon: LayoutDashboard,\r\n    },\r\n    {\r\n        title: 'Bookings',\r\n        href: '/admin/bookings',\r\n        icon: Calendar,\r\n    },\r\n    {\r\n        title: 'Calendar',\r\n        href: '/admin/calendar',\r\n        icon: Calendar,\r\n    },\r\n    {\r\n        title: 'Services',\r\n        href: '/admin/services',\r\n        icon: Package,\r\n    },\r\n    {\r\n        title: 'Complaints',\r\n        href: '/admin/complaints',\r\n        icon: MessageSquare,\r\n    },\r\n    {\r\n        title: 'Customers',\r\n        href: '/admin/customers',\r\n        icon: Users,\r\n    },\r\n    {\r\n        title: 'Settings',\r\n        href: '/admin/settings',\r\n        icon: Settings,\r\n    },\r\n]\r\n\r\nimport { ThemeToggle } from '@/components/shared/ThemeToggle'\r\n\r\ninterface AdminSidebarProps {\r\n    onClose?: () => void\r\n}\r\n\r\nexport function AdminSidebar({ onClose }: AdminSidebarProps) {\r\n    const pathname = usePathname()\r\n\r\n    return (\r\n        <div className=\"flex h-full w-full flex-col border-r bg-card px-3 py-4\">\r\n            <div className=\"mb-8 flex items-center justify-between px-3\">\r\n                <h1 className=\"text-xl font-bold\">Admin Panel</h1>\r\n                <ThemeToggle />\r\n            </div>\r\n            <div className=\"flex-1 space-y-1\">\r\n                {sidebarItems.map((item) => (\r\n                    <Link key={item.href} href={item.href} onClick={onClose}>\r\n                        <span\r\n                            className={cn(\r\n                                'flex items-center rounded-md px-3 py-2 text-sm font-medium hover:bg-accent hover:text-accent-foreground',\r\n                                pathname === item.href ? 'bg-accent text-accent-foreground' : 'text-muted-foreground'\r\n                            )}\r\n                        >\r\n                            <item.icon className=\"mr-2 h-4 w-4\" />\r\n                            {item.title}\r\n                        </span>\r\n                    </Link>\r\n                ))}\r\n            </div>\r\n            <div className=\"mt-auto\">\r\n                <Button\r\n                    variant=\"ghost\"\r\n                    className=\"w-full justify-start text-red-500 hover:bg-red-50 hover:text-red-600\"\r\n                    onClick={async () => {\r\n                        await fetch('/api/auth/logout', { method: 'POST' })\r\n                        window.location.href = '/admin/login'\r\n                    }}\r\n                >\r\n                    <LogOut className=\"mr-2 h-4 w-4\" />\r\n                    Logout\r\n                </Button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAwCA;AA9CA;;;;;;;AAQA,MAAM,eAAe;IACjB;QACI,OAAO;QACP,MAAM;QACN,MAAM,+OAAe;IACzB;IACA;QACI,OAAO;QACP,MAAM;QACN,MAAM,sNAAQ;IAClB;IACA;QACI,OAAO;QACP,MAAM;QACN,MAAM,sNAAQ;IAClB;IACA;QACI,OAAO;QACP,MAAM;QACN,MAAM,mNAAO;IACjB;IACA;QACI,OAAO;QACP,MAAM;QACN,MAAM,yOAAa;IACvB;IACA;QACI,OAAO;QACP,MAAM;QACN,MAAM,6MAAK;IACf;IACA;QACI,OAAO;QACP,MAAM;QACN,MAAM,sNAAQ;IAClB;CACH;;AAQM,SAAS,aAAa,EAAE,OAAO,EAAqB;IACvD,MAAM,WAAW,IAAA,iJAAW;IAE5B,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAG,WAAU;kCAAoB;;;;;;kCAClC,8OAAC,0JAAW;;;;;;;;;;;0BAEhB,8OAAC;gBAAI,WAAU;0BACV,aAAa,GAAG,CAAC,CAAC,qBACf,8OAAC,uKAAI;wBAAiB,MAAM,KAAK,IAAI;wBAAE,SAAS;kCAC5C,cAAA,8OAAC;4BACG,WAAW,IAAA,yHAAE,EACT,2GACA,aAAa,KAAK,IAAI,GAAG,qCAAqC;;8CAGlE,8OAAC,KAAK,IAAI;oCAAC,WAAU;;;;;;gCACpB,KAAK,KAAK;;;;;;;uBARR,KAAK,IAAI;;;;;;;;;;0BAa5B,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC,4IAAM;oBACH,SAAQ;oBACR,WAAU;oBACV,SAAS;wBACL,MAAM,MAAM,oBAAoB;4BAAE,QAAQ;wBAAO;wBACjD,OAAO,QAAQ,CAAC,IAAI,GAAG;oBAC3B;;sCAEA,8OAAC,oNAAM;4BAAC,WAAU;;;;;;wBAAiB;;;;;;;;;;;;;;;;;;AAMvD"}},
    {"offset": {"line": 167, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mouni/Desktop/marrakech/src/components/admin/Notifications.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState } from 'react'\r\nimport useSWR from 'swr'\r\nimport { Bell } from 'lucide-react'\r\nimport {\r\n    DropdownMenu,\r\n    DropdownMenuContent,\r\n    DropdownMenuItem,\r\n    DropdownMenuLabel,\r\n    DropdownMenuSeparator,\r\n    DropdownMenuTrigger,\r\n} from '@/components/ui/dropdown-menu'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Notification } from '@/types/admin'\r\nimport { formatDistanceToNow } from 'date-fns'\r\nimport { useRouter } from 'next/navigation'\r\n\r\nconst fetcher = async (url: string) => {\r\n    const res = await fetch(url)\r\n    return res.json()\r\n}\r\n\r\nexport function Notifications() {\r\n    const { data: notifications, mutate } = useSWR<Notification[]>('/api/admin/notifications', fetcher, {\r\n        refreshInterval: 30000 // Poll every 30 seconds\r\n    })\r\n    const router = useRouter()\r\n    const [isOpen, setIsOpen] = useState(false)\r\n\r\n    const unreadCount = notifications?.filter(n => !n.read).length || 0\r\n\r\n    const handleNotificationClick = (notification: Notification) => {\r\n        setIsOpen(false)\r\n        if (notification.link) {\r\n            router.push(notification.link)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <DropdownMenu open={isOpen} onOpenChange={setIsOpen}>\r\n            <DropdownMenuTrigger asChild>\r\n                <Button variant=\"ghost\" size=\"icon\" className=\"relative\">\r\n                    <Bell className=\"h-5 w-5\" />\r\n                    {unreadCount > 0 && (\r\n                        <Badge\r\n                            variant=\"destructive\"\r\n                            className=\"absolute -top-1 -right-1 h-5 w-5 justify-center rounded-full p-0 text-[10px]\"\r\n                        >\r\n                            {unreadCount}\r\n                        </Badge>\r\n                    )}\r\n                </Button>\r\n            </DropdownMenuTrigger>\r\n            <DropdownMenuContent align=\"end\" className=\"w-80\">\r\n                <DropdownMenuLabel>Notifications</DropdownMenuLabel>\r\n                <DropdownMenuSeparator />\r\n                <div className=\"max-h-[300px] overflow-y-auto\">\r\n                    {notifications?.length === 0 ? (\r\n                        <div className=\"p-4 text-center text-sm text-muted-foreground\">\r\n                            No new notifications\r\n                        </div>\r\n                    ) : (\r\n                        notifications?.map((notification) => (\r\n                            <DropdownMenuItem\r\n                                key={notification.id}\r\n                                className=\"flex flex-col items-start gap-1 p-3 cursor-pointer\"\r\n                                onClick={() => handleNotificationClick(notification)}\r\n                            >\r\n                                <div className=\"flex w-full items-center justify-between\">\r\n                                    <span className=\"font-semibold text-sm\">{notification.title}</span>\r\n                                    <span className=\"text-xs text-muted-foreground\">\r\n                                        {formatDistanceToNow(new Date(notification.createdAt), { addSuffix: true })}\r\n                                    </span>\r\n                                </div>\r\n                                <p className=\"text-sm text-muted-foreground line-clamp-2\">\r\n                                    {notification.message}\r\n                                </p>\r\n                            </DropdownMenuItem>\r\n                        ))\r\n                    )}\r\n                </div>\r\n            </DropdownMenuContent>\r\n        </DropdownMenu>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAQA;AACA;AAEA;AACA;AAjBA;;;;;;;;;;AAmBA,MAAM,UAAU,OAAO;IACnB,MAAM,MAAM,MAAM,MAAM;IACxB,OAAO,IAAI,IAAI;AACnB;AAEO,SAAS;IACZ,MAAM,EAAE,MAAM,aAAa,EAAE,MAAM,EAAE,GAAG,IAAA,yKAAM,EAAiB,4BAA4B,SAAS;QAChG,iBAAiB,MAAM,wBAAwB;IACnD;IACA,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IAErC,MAAM,cAAc,eAAe,OAAO,CAAA,IAAK,CAAC,EAAE,IAAI,EAAE,UAAU;IAElE,MAAM,0BAA0B,CAAC;QAC7B,UAAU;QACV,IAAI,aAAa,IAAI,EAAE;YACnB,OAAO,IAAI,CAAC,aAAa,IAAI;QACjC;IACJ;IAEA,qBACI,8OAAC,4JAAY;QAAC,MAAM;QAAQ,cAAc;;0BACtC,8OAAC,mKAAmB;gBAAC,OAAO;0BACxB,cAAA,8OAAC,4IAAM;oBAAC,SAAQ;oBAAQ,MAAK;oBAAO,WAAU;;sCAC1C,8OAAC,0MAAI;4BAAC,WAAU;;;;;;wBACf,cAAc,mBACX,8OAAC,0IAAK;4BACF,SAAQ;4BACR,WAAU;sCAET;;;;;;;;;;;;;;;;;0BAKjB,8OAAC,mKAAmB;gBAAC,OAAM;gBAAM,WAAU;;kCACvC,8OAAC,iKAAiB;kCAAC;;;;;;kCACnB,8OAAC,qKAAqB;;;;;kCACtB,8OAAC;wBAAI,WAAU;kCACV,eAAe,WAAW,kBACvB,8OAAC;4BAAI,WAAU;sCAAgD;;;;;mCAI/D,eAAe,IAAI,CAAC,6BAChB,8OAAC,gKAAgB;gCAEb,WAAU;gCACV,SAAS,IAAM,wBAAwB;;kDAEvC,8OAAC;wCAAI,WAAU;;0DACX,8OAAC;gDAAK,WAAU;0DAAyB,aAAa,KAAK;;;;;;0DAC3D,8OAAC;gDAAK,WAAU;0DACX,IAAA,yKAAmB,EAAC,IAAI,KAAK,aAAa,SAAS,GAAG;oDAAE,WAAW;gDAAK;;;;;;;;;;;;kDAGjF,8OAAC;wCAAE,WAAU;kDACR,aAAa,OAAO;;;;;;;+BAXpB,aAAa,EAAE;;;;;;;;;;;;;;;;;;;;;;AAoBpD"}},
    {"offset": {"line": 337, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mouni/Desktop/marrakech/src/components/admin/AdminHeader.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { Sheet, SheetContent, SheetTrigger, SheetTitle } from \"@/components/ui/sheet\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Menu } from \"lucide-react\"\r\nimport { AdminSidebar } from '@/components/admin/AdminSidebar'\r\nimport { Notifications } from '@/components/admin/Notifications'\r\n\r\nexport function AdminHeader() {\r\n    return (\r\n        <header className=\"flex items-center justify-between p-4 border-b bg-card md:hidden\">\r\n            <div className=\"flex items-center gap-2\">\r\n                <Sheet>\r\n                    <SheetTrigger asChild>\r\n                        <Button variant=\"ghost\" size=\"icon\">\r\n                            <Menu className=\"h-6 w-6\" />\r\n                        </Button>\r\n                    </SheetTrigger>\r\n                    <SheetContent side=\"left\" className=\"p-0 w-64\">\r\n                        <SheetTitle className=\"sr-only\">Admin Menu</SheetTitle>\r\n                        <AdminSidebar />\r\n                    </SheetContent>\r\n                </Sheet>\r\n                <span className=\"font-bold text-lg\">Admin Panel</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n                <Notifications />\r\n            </div>\r\n        </header>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAQO,SAAS;IACZ,qBACI,8OAAC;QAAO,WAAU;;0BACd,8OAAC;gBAAI,WAAU;;kCACX,8OAAC,0IAAK;;0CACF,8OAAC,iJAAY;gCAAC,OAAO;0CACjB,cAAA,8OAAC,4IAAM;oCAAC,SAAQ;oCAAQ,MAAK;8CACzB,cAAA,8OAAC,0MAAI;wCAAC,WAAU;;;;;;;;;;;;;;;;0CAGxB,8OAAC,iJAAY;gCAAC,MAAK;gCAAO,WAAU;;kDAChC,8OAAC,+IAAU;wCAAC,WAAU;kDAAU;;;;;;kDAChC,8OAAC,2JAAY;;;;;;;;;;;;;;;;;kCAGrB,8OAAC;wBAAK,WAAU;kCAAoB;;;;;;;;;;;;0BAExC,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC,6JAAa;;;;;;;;;;;;;;;;AAI9B"}}]
}