module.exports=[21621,a=>{"use strict";let b;var c=a.i(87924),d=a.i(72131),e=a.i(91119),f=a.i(99570),g=a.i(86304),h=a.i(80701),i=a.i(50104),j=a.i(70121),k=a.i(97942),l=a.i(7554),m=Symbol("radix.slottable"),n="AlertDialog",[o,p]=(0,i.createContextScope)(n,[k.createDialogScope]),q=(0,k.createDialogScope)(),r=a=>{let{__scopeAlertDialog:b,...d}=a,e=q(b);return(0,c.jsx)(k.Root,{...e,...d,modal:!0})};r.displayName=n,d.forwardRef((a,b)=>{let{__scopeAlertDialog:d,...e}=a,f=q(d);return(0,c.jsx)(k.Trigger,{...f,...e,ref:b})}).displayName="AlertDialogTrigger";var s=a=>{let{__scopeAlertDialog:b,...d}=a,e=q(b);return(0,c.jsx)(k.Portal,{...e,...d})};s.displayName="AlertDialogPortal";var t=d.forwardRef((a,b)=>{let{__scopeAlertDialog:d,...e}=a,f=q(d);return(0,c.jsx)(k.Overlay,{...f,...e,ref:b})});t.displayName="AlertDialogOverlay";var u="AlertDialogContent",[v,w]=o(u),x=((b=({children:a})=>(0,c.jsx)(c.Fragment,{children:a})).displayName="AlertDialogContent.Slottable",b.__radixId=m,b),y=d.forwardRef((a,b)=>{let{__scopeAlertDialog:e,children:f,...g}=a,h=q(e),i=d.useRef(null),m=(0,j.useComposedRefs)(b,i),n=d.useRef(null);return(0,c.jsx)(k.WarningProvider,{contentName:u,titleName:z,docsSlug:"alert-dialog",children:(0,c.jsx)(v,{scope:e,cancelRef:n,children:(0,c.jsxs)(k.Content,{role:"alertdialog",...h,...g,ref:m,onOpenAutoFocus:(0,l.composeEventHandlers)(g.onOpenAutoFocus,a=>{a.preventDefault(),n.current?.focus({preventScroll:!0})}),onPointerDownOutside:a=>a.preventDefault(),onInteractOutside:a=>a.preventDefault(),children:[(0,c.jsx)(x,{children:f}),(0,c.jsx)(G,{contentRef:i})]})})})});y.displayName=u;var z="AlertDialogTitle",A=d.forwardRef((a,b)=>{let{__scopeAlertDialog:d,...e}=a,f=q(d);return(0,c.jsx)(k.Title,{...f,...e,ref:b})});A.displayName=z;var B="AlertDialogDescription",C=d.forwardRef((a,b)=>{let{__scopeAlertDialog:d,...e}=a,f=q(d);return(0,c.jsx)(k.Description,{...f,...e,ref:b})});C.displayName=B;var D=d.forwardRef((a,b)=>{let{__scopeAlertDialog:d,...e}=a,f=q(d);return(0,c.jsx)(k.Close,{...f,...e,ref:b})});D.displayName="AlertDialogAction";var E="AlertDialogCancel",F=d.forwardRef((a,b)=>{let{__scopeAlertDialog:d,...e}=a,{cancelRef:f}=w(E,d),g=q(d),h=(0,j.useComposedRefs)(b,f);return(0,c.jsx)(k.Close,{...g,...e,ref:h})});F.displayName=E;var G=({contentRef:a})=>{let b=`\`${u}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${u}\` by passing a \`${B}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${u}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return d.useEffect(()=>{document.getElementById(a.current?.getAttribute("aria-describedby"))||console.warn(b)},[b,a]),null},H=a.i(68114);function I({...a}){return(0,c.jsx)(r,{"data-slot":"alert-dialog",...a})}function J({...a}){return(0,c.jsx)(s,{"data-slot":"alert-dialog-portal",...a})}function K({className:a,...b}){return(0,c.jsx)(t,{"data-slot":"alert-dialog-overlay",className:(0,H.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...b})}function L({className:a,...b}){return(0,c.jsxs)(J,{children:[(0,c.jsx)(K,{}),(0,c.jsx)(y,{"data-slot":"alert-dialog-content",className:(0,H.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...b})]})}function M({className:a,...b}){return(0,c.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,H.cn)("flex flex-col gap-2 text-center sm:text-left",a),...b})}function N({className:a,...b}){return(0,c.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,H.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...b})}function O({className:a,...b}){return(0,c.jsx)(A,{"data-slot":"alert-dialog-title",className:(0,H.cn)("text-lg font-semibold",a),...b})}function P({className:a,...b}){return(0,c.jsx)(C,{"data-slot":"alert-dialog-description",className:(0,H.cn)("text-muted-foreground text-sm",a),...b})}function Q({className:a,...b}){return(0,c.jsx)(D,{className:(0,H.cn)((0,f.buttonVariants)(),a),...b})}function R({className:a,...b}){return(0,c.jsx)(F,{className:(0,H.cn)((0,f.buttonVariants)({variant:"outline"}),a),...b})}var S=a.i(92258),T=a.i(63519),U=a.i(41675),V=a.i(81560);let W=(0,a.i(70106).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var X=a.i(23292),Y=a.i(56711);function Z(){let[a,b]=(0,d.useState)([]),[i,j]=(0,d.useState)(!0),[k,l]=(0,d.useState)("ALL"),[m,n]=(0,d.useState)(null),o=async()=>{try{j(!0);let a="ALL"===k?"/api/admin/support-requests":`/api/admin/support-requests?status=${k}`,c=await fetch(a);if(!c.ok)throw Error("Failed to fetch");let d=await c.json();b(d)}catch(a){X.toast.error("Failed to load support requests")}finally{j(!1)}};(0,d.useEffect)(()=>{o()},[k]);let p=async(a,b)=>{try{if(!(await fetch(`/api/admin/support-requests/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:b})})).ok)throw Error("Failed to update");X.toast.success("Status updated successfully"),o()}catch(a){X.toast.error("Failed to update status")}},q=async a=>{try{if(!(await fetch(`/api/admin/support-requests/${a}`,{method:"DELETE"})).ok)throw Error("Failed to delete");X.toast.success("Request deleted successfully"),n(null),o()}catch(a){X.toast.error("Failed to delete request")}};return(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Support Requests"}),(0,c.jsx)("p",{className:"text-muted-foreground mt-1",children:"Manage customer support requests and complaints"})]}),(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsxs)(h.Select,{value:k,onValueChange:l,children:[(0,c.jsx)(h.SelectTrigger,{className:"w-[180px]",children:(0,c.jsx)(h.SelectValue,{placeholder:"Filter by status"})}),(0,c.jsxs)(h.SelectContent,{children:[(0,c.jsx)(h.SelectItem,{value:"ALL",children:"All Requests"}),(0,c.jsx)(h.SelectItem,{value:"PENDING",children:"Pending"}),(0,c.jsx)(h.SelectItem,{value:"IN_PROGRESS",children:"In Progress"}),(0,c.jsx)(h.SelectItem,{value:"RESOLVED",children:"Resolved"})]})]}),(0,c.jsx)(f.Button,{onClick:o,variant:"outline",size:"icon",children:(0,c.jsx)(W,{className:"h-4 w-4"})})]})]}),i?(0,c.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,c.jsx)(W,{className:"h-8 w-8 animate-spin text-primary"})}):0===a.length?(0,c.jsx)(e.Card,{children:(0,c.jsx)(e.CardContent,{className:"py-12 text-center",children:(0,c.jsx)("p",{className:"text-muted-foreground",children:"No support requests found"})})}):(0,c.jsx)("div",{className:"grid gap-6",children:a.map(a=>(0,c.jsxs)(e.Card,{className:"hover:shadow-md transition-shadow",children:[(0,c.jsx)(e.CardHeader,{className:"pb-3",children:(0,c.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-3",children:[(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)(e.CardTitle,{className:"text-xl mb-2",children:a.subject}),(0,c.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-sm text-muted-foreground",children:[(0,c.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,c.jsx)(S.Mail,{className:"h-4 w-4"}),(0,c.jsx)("span",{children:a.email})]}),a.phone&&(0,c.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,c.jsx)(T.Phone,{className:"h-4 w-4"}),(0,c.jsx)("span",{children:a.phone})]}),(0,c.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,c.jsx)(U.Calendar,{className:"h-4 w-4"}),(0,c.jsx)("span",{children:(0,Y.format)(new Date(a.createdAt),"MMM dd, yyyy")})]})]})]}),(0,c.jsx)(g.Badge,{className:(a=>{switch(a){case"PENDING":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400";case"IN_PROGRESS":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400";case"RESOLVED":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}})(a.status),children:a.status.replace("_"," ")})]})}),(0,c.jsxs)(e.CardContent,{className:"space-y-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)("p",{className:"text-sm font-medium mb-1",children:["From: ",a.name]}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:a.message})]}),(0,c.jsxs)("div",{className:"flex flex-wrap gap-2 pt-2 border-t",children:[(0,c.jsxs)(h.Select,{value:a.status,onValueChange:b=>p(a.id,b),children:[(0,c.jsx)(h.SelectTrigger,{className:"w-[160px]",children:(0,c.jsx)(h.SelectValue,{})}),(0,c.jsxs)(h.SelectContent,{children:[(0,c.jsx)(h.SelectItem,{value:"PENDING",children:"Pending"}),(0,c.jsx)(h.SelectItem,{value:"IN_PROGRESS",children:"In Progress"}),(0,c.jsx)(h.SelectItem,{value:"RESOLVED",children:"Resolved"})]})]}),(0,c.jsxs)(f.Button,{variant:"destructive",size:"sm",onClick:()=>n(a.id),children:[(0,c.jsx)(V.Trash2,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]},a.id))}),(0,c.jsx)(I,{open:!!m,onOpenChange:()=>n(null),children:(0,c.jsxs)(L,{children:[(0,c.jsxs)(M,{children:[(0,c.jsx)(O,{children:"Are you sure?"}),(0,c.jsx)(P,{children:"This action cannot be undone. This will permanently delete the support request."})]}),(0,c.jsxs)(N,{children:[(0,c.jsx)(R,{children:"Cancel"}),(0,c.jsx)(Q,{onClick:()=>m&&q(m),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})}a.s(["default",()=>Z],21621)}];

//# sourceMappingURL=src_app_admin_complaints_page_tsx_28382ef2._.js.map